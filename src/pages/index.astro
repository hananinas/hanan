---
import { getCollection } from "astro:content";
import Layout from "@layouts/Layout.astro";
import Header from "@components/Header.astro";
import Footer from "@components/Footer.astro";
import Card from "@components/Card";
import Socials from "@components/Socials.astro";
import getSortedPosts from "@utils/getSortedPosts";
import slugify from "@utils/slugify";
import Hero from "@components/Hero.astro";
import { SOCIALS } from "@config";

const posts = await getCollection("blog");

const sortedPosts = getSortedPosts(posts);
const featuredPosts = sortedPosts.filter(({ data }) => data.featured);
const socialCount = SOCIALS.filter(social => social.active).length;

---

<Layout>
  {
    socialCount > 0 && (
      <div class="floating-socials">
        <Socials variant="floating" />
      </div>
    )
  }
  <Header  />
  <main id="main-content" class="relative overflow-hidden pb-24">
    

    <Hero />

    {
      featuredPosts.length > 0 && (
        <section id="projects" class="section-block">
          <div class="section-heading">
            <h2 class="section-title">
              <span class="section-tilde">~/</span>
              Projects
            </h2>
            <a href="/projects" class="section-link">
              <span>View all</span>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                class="h-4 w-4"
                aria-hidden="true"
              >
                <path
                  fill="currentColor"
                  d="m13 5.586 4.707 4.707-9.586.001V13.7h9.586L13 18.414 14.414 19.8 21.828 12.384 14.414 4.97 13 5.586z"
                ></path>
              </svg>
            </a>
          </div>
          <ul class="project-grid">
            {featuredPosts.map(({ data }) => (
              <Card
                href={`/projects/${slugify(data)}`}
                frontmatter={data}
                secHeading={false}
              />
            ))}
          </ul>
        </section>
      )
    }

    <section id="about" class="section-block">
      <div class="section-heading">
        <h2 class="section-title">
          <span class="section-tilde">~/</span>
          About me
        </h2>
        <a href="/about" class="section-link">
          <span>Read more</span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            class="h-4 w-4"
            aria-hidden="true"
          >
            <path
              fill="currentColor"
              d="m13 5.586 4.707 4.707-9.586.001V13.7h9.586L13 18.414 14.414 19.8 21.828 12.384 14.414 4.97 13 5.586z"
            ></path>
          </svg>
        </a>
      </div>
      <div class="about-panel">
        <p>
          I’m Hanan, a software development student at ITU, and the founder of
          Elusive and UAI. I love transforming ambitious ideas into digital
          products that feel thoughtful and useful.
        </p>
        <p>
          My focus is building solutions that connect technology with business
          outcomes. I’m happiest when I’m collaborating on products that help
          people move faster and think bigger.
        </p>
      </div>
    </section>

    <section id="contact" class="section-block">
      <div class="section-heading">
        <h2 class="section-title">
          <span class="section-tilde">~/</span>
          Contact
        </h2>
      </div>
      <div class="contact-wrap">
        <p class="contact-copy">
          I’m currently open to freelance projects, part-time roles, and
          meaningful collaborations. If you have an opportunity or a question,
          I’d love to hear about it.
        </p>
        <div class="contact-card">
          <span class="contact-label">Let’s build something</span>
          <a href="mailto:hanan@uai.dk" class="contact-mail">hanan@uai.dk</a>
        </div>
      </div>
    </section>
  </main>

  <Footer />
</Layout>


<style>
    @reference "../styles/base.css";

  .floating-socials {
    @apply pointer-events-auto absolute left-1 top-0 z-30 hidden flex-col items-center sm:left-4 sm:flex md:left-8;
  }
  .floating-socials::before {
    content: "";
    @apply absolute left-1/2 top-0 h-[320px] w-px -translate-x-1/2 bg-gradient-to-b from-[#2F8F5B]/0 via-[#2F8F5B]/20 to-[#2F8F5B]/70 md:h-[420px];
  }
  .floating-socials::after {
    content: "";
    @apply absolute left-1/2 top-0 h-3 w-3 -translate-x-1/2 -translate-y-1/2 rounded-full border border-[#2F8F5B]/70 bg-skin-fill shadow-[0_0_20px_rgba(47,143,91,0.45)];
  }
  .floating-socials :global(.socials--floating) {
    @apply mt-24 md:mt-28;
  }
</style>
